{% extends "base.html" %}

{% block content %}
<style>
/* ===== SHOP PAGE STYLES ===== */
.category-links a {
    text-decoration: none;
    margin-right: 10px;
    padding: 6px 14px;
    border-radius: 20px;
    border: 1px solid #0d6efd;
    color: #0d6efd;
    font-size: 14px;
    transition: 0.2s;
}

.category-links a:hover {
    background: #0d6efd;
    color: #fff;
}

.cake-card {
    display: flex;
}

.cake-card .card {
    width: 100%;
    border-radius: 16px;
    overflow: hidden;
    transition: transform 0.2s, box-shadow 0.2s;
}

.cake-card .card:hover {
    transform: translateY(-6px);
    box-shadow: 0 12px 30px rgba(0,0,0,0.12);
}

.cake-img {
    height: 220px;
    width: 100%;
    object-fit: cover;
}

.card-body {
    display: flex;
    flex-direction: column;
}

.card-title {
    min-height: 48px;
}

.card-desc {
    flex-grow: 1;
}
</style>

<div class="container my-5 animate__animated animate__fadeIn">

    <!-- HEADER -->
    <div class="row mb-4 align-items-center">
        <div class="col-md-6">
            <h2 class="fw-bold mb-3">
                <i class="fas fa-store me-2 text-primary"></i> Our Cake Gallery
            </h2>

            <div class="category-links">
                <a href="/shop">All</a>
                <a href="/shop?category=Chocolate">Chocolate</a>
                <a href="/shop?category=Birthday">Birthday</a>
                <a href="/shop?category=Wedding">Wedding</a>
                <a href="/shop?category=Fruit">Fruit</a>
                <a href="/shop?category=Special">Special</a>
            </div>
        </div>

        <div class="col-md-6">
            <input type="text"
                   id="searchInput"
                   class="form-control rounded-pill"
                   placeholder="Search cakes by name...">
        </div>
    </div>

    <!-- CAKES GRID -->
    <div class="row g-4" id="cakeContainer">
        {% for cake in cakes %}
        <div class="col-lg-4 col-md-6 cake-card" data-name="{{ cake.name | lower }}">
            <div class="card h-100 shadow-sm border-0">

                <img src="{{ cake.image }}" class="cake-img" alt="{{ cake.name }}">

                <div class="card-body">
                    <h5 class="card-title fw-bold">{{ cake.name }}</h5>

                    <p class="card-desc text-muted small">
                        {{ cake.description }}
                    </p>

                    <div class="d-flex justify-content-between align-items-center mt-3">
                        <span class="h5 text-primary mb-0">â‚¹{{ cake.price }}</span>

                        <a href="/add_to_cart/{{ cake.id }}"
                           class="btn btn-outline-primary rounded-pill btn-sm">
                            <i class="fas fa-cart-plus me-1"></i> Add
                        </a>
                    </div>
                </div>

            </div>
        </div>
        {% endfor %}
    </div>

</div>

<script>
document.getElementById("searchInput").addEventListener("keyup", function () {
    const value = this.value.toLowerCase();
    document.querySelectorAll(".cake-card").forEach(card => {
        card.style.display = card.dataset.name.includes(value) ? "block" : "none";
    });
});
</script>
{% endblock %}
